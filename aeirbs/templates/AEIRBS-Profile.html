{% extends 'AEIRBS-Default.html' %}
{% block title %}AEIRBS-Profile{% endblock title %}
{% load static %}
{% block body %}

<body>
  <div class="container-fluid" style="padding:0 25px 25px 12.5px; height: 100%;">

    <div class="container userProfile" style="width: 60%; height: 100%;">

      <div
        style="background-color: white; padding: 25px; box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.3); border-radius: 5px; ">

        <div
          style="background-color:#343A40; height: auto; box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.3);  border-radius: 5px; padding: 25px;">

          <div class="row">
            <div class="col-4">
              <img src="{{ user.profile.user_image.url }}"
                style="border-radius: 5px; width:90%; border: 8px solid white;box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.3) ">
            </div>

            <div class="col text-light" style="position: relative;">
              <button id="editProfileButton" type="submit" class="btn btn-outline-light btn-sm float-right" title="Edit Profile">
                <i class="fas fa-user-edit fa-sm mr-2"></i>Edit Profile
              </button>

              <div class="" style="position: absolute; bottom: 0;">
                <h3><b>{{user.get_full_name}}</b></h3>
                <div class="mt-2">
                  <h6><i class="fas fa-user fa-sm mr-2 "></i>{% if user.is_superuser%} Super- Admin
                    {% else %} Admin {% endif %}</h6>
                  <h6><i class="fas fa-envelope fa-sm mr-2 "></i>{{user.email}}</h6>
                </div>
              </div>
            </div>
          </div>

        </div>

        <h6 class="mt-3"><b>Recent Activities:</b></h6>
        <div
          style="background-color: #EAEDED; padding: 10px; box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.3); border-radius: 5px;">
          <div style="max-height: 75vh;  overflow-y: scroll; overflow-x: hidden;">
            <table id="" class="table" style="width:100%;">
              <tbody>
                {% for log in logs %}
                {% if log.0 == user.username%}
                <tr style="font-size: 12px;">
                  <td>
                    <div class="row">
                      <div class="col">
                        <b>{{log.1}}</b>
                      </div>
                      <div class="col">
                        <small class="float-right">{{log.2}}</small>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col ml-3">
                        {{log.3}}
                      </div>
                    </div>
                  </td>
                </tr>
                {%endif%}
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>

      </div>

    </div>


    <div class="container-fluid editProfileContainer hidden" id="editProfileContainer" style="padding:0 25px 25px 25px;">
      <div class="container-fluid"
        style="background-color: white; padding: 25px; box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.3); border-radius: 5px;">

        <h3 class="" id=""><b><b>EDIT PROFILE</b></b>
        </h3>

        <!--Edit Profile Form-->
        <div class="container my-3" id=""
          style=" background-color:#EAEDED; padding: 20px; border-radius: 5px; box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.3); width: 95%;">

          <a href="{% url 'profile' %}" id="" class="btn btn-link text-dark float-left my-2 icon"
            title="Go Back">
            <span><i class="fas fa-arrow-left"></i></span>
      </a>

          <form action="" method="post">
            <div class="row my-5">
              <!--Upload Admin Image-->
              <div class="col-2 imgUp mt-4">
                <div class="imagePreview"></div>
                <label class="btn btn-img btn-sm">
                  Select Image<input type="file" class="uploadFile img" value="Upload Photo"
                    style="width: 0px;height: 0px;overflow: hidden;">
                </label>
              </div>

              <div class="col-10" style="border-left: 3px solid #343A40;">
                {% csrf_token %}
                <div class="row">
                  <!--Dropdown Access Role-->
                  <div class="col">
                    <div class="form-group">
                      <small for="accessRole">Access Role</small>
                      <select class="form-control" name="accessRole">
                        {% if request.user.is_superuser %}
                        <option id=" adminRole " value="adminRole">Admin</option>
                        <option id="superRole " value="superRole" selected>Super Admin</option>
                        {% else %}
                        <option id="adminRole" value="adminRole" selected>Admin</option>
                        <option id="superRole" value="superRole">Super Admin</option>
                        {% endif %}
                      </select>
                    </div>
                  </div>

                  <!--Input Employee ID-->
                  <div class="col">
                    <div class="form-group">
                      <small for="employeeID">Employee ID</small>
                      <input type="text" class="form-control" id="" name="inputEmployeeID" placeholder="Employee ID"
                        value="{{request.user.username}}">
                    </div>
                  </div>

                  <div class="col">
                  </div>
                </div>

                <!--Input First Name-->
                <div class="row">
                  <div class="col">
                    <div class="form-group">
                      <small for="firstName">First Name</small>
                      <input type="text" class="form-control" id="" name="inputFirstName" placeholder="First Name"
                        value="{{request.user.first_name}}">
                    </div>
                  </div>

                  <!--Input Middle Name-->
                  <div class="col">
                    <div class="form-group">
                      <small for="middleName">Middle Name</small>
                      <input type="text" class="form-control" id="" name="inputMiddleName" placeholder="Middle Name"
                        value="{{request.user.profile.middle_name}}">
                    </div>
                  </div>

                  <!--Input last Name-->
                  <div class="col">
                    <div class="form-group">
                      <small for="lastName">Last Name</small>
                      <input type="text" class="form-control" id="" name="inputLastName" placeholder="Last Name"
                        value="{{request.user.last_name}}">
                    </div>
                  </div>
                </div>

                <div class="row">
                  <!--Input Job Position-->
                  <div class="col">
                    <div class="form-group">
                      <small for="jobPosition">Job Position</small>
                      <input type="text" class="form-control" id="" name="inputJobPosition" placeholder="Job Position"
                        value="{{request.user.profile.job_title}}">
                    </div>
                  </div>

                  <!--Input Company Email-->
                  <div class="col">
                    <div class="form-group">
                      <small for="companyEmail">Company Email</small>
                      <input type="email" class="form-control" id="" name="inputCompanyEmail"
                        placeholder="Company Email" value="{{request.user.email}}">
                    </div>
                  </div>

                  <!--Input Phone Number-->
                  <div class="col">
                    <div class="form-group">
                      <small for="mobileNumber">Mobile Number</small>
                      <input type="text" class="form-control" id="" name="inputMobileNumber" placeholder="Mobile Number"
                        value="{{request.user.profile.phone_number}}">
                    </div>
                  </div>
                </div>

                <button type="submit" class="btn btn-dark float-right btn-sm" id="saveProfile">Save</button>
              </div>

            </div>
          </form>

        </div>

      </div>
    </div>

  </div>
</body>

{% endblock body %}