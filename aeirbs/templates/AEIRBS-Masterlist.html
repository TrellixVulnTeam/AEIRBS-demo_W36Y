{% extends 'AEIRBS-Default.html' %} {% block title %}AEIRBS-Masterlist{% endblock title %} {% load static %} {% block body %}

<body>

    <div class="left-padding" id="users">
        <div class="container-fluid userContainer" id="userContainer" style="padding:0 25px 25px 25px;">
            <div class="container-fluid" style="background-color: white; padding: 25px; box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.3); border-radius: 0px;">

                <div class="row">
                    <!--Page Labels-->
                    <div class="col-7">
                        <h3 id="masterlistLabel"><b><b>ADMIN MASTERLIST</b></b>
                        </h3>
                        <h3 class="hidden" id="addAdminLabel"><b><b>ADD ADMIN</b></b>
                        </h3>

                    </div>

                    <!--Add Component Button-->
                    {% if request.user.is_superuser %}
                    <div class="col-2">
                        <button type="button" id="addAdminButton" class="btn btn-dark float-right btn-sm mt-1">
              <i class="fas fa-user-plus fa-sm mr-2"></i>Add Admin
            </button>
                    </div>
                    {% endif %}

                    <!--Search Component-->
                    <div class="col-3 mt-1">
                        <form action="#" method="post">
                            {% csrf_token %}
                            <div class="input-group mb-3" id="searchAdmin">
                                <div class="input-group-prepend">
                                    <span class="input-group-text"><i class="fas fa-search"></i></span>
                                </div>
                                <input type="text" class="input form-control" placeholder="Search Admin">
                            </div>
                        </form>
                    </div>
                </div>

                <!--Add Admin Form-->
                <div class="container my-3 hidden" id="addAdminForm" style=" background-color:#EAEDED; padding: 20px; border-radius: 5px; box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.3);">

                    <button type="button" id="cancel-addAdmin" class="btn btn-link text-dark float-left my-2 icon" title="Go Back">
                      <span><i class="fas fa-arrow-left"></i></span>
                    </button>

                    <div class="row my-5">
                        <!--Upload Admin Image-->
                        <div class="col-2 imgUp mt-4">
                            <div class="imagePreview"></div>
                            <label class="btn btn-img btn-sm">
                              Select Image<input type="file" class="uploadFile img" value="Upload Photo"
                              style="width: 0px;height: 0px;overflow: hidden;">
                            </label>
                        </div>

                        <div class="col-10" style="border-left: 1px solid #343A40;">
                            <form action="{% url 'add_user' %}" method="post">
                                {% csrf_token %}
                                <div class="row">
                                    <!--Dropdown Access Role-->
                                    <div class="col">
                                        <div class="form-group">
                                            <label for="accessRole">Access Role</label>
                                            <select class="form-control" name="accessRole">
                                            <option></option>
                                            <option id="adminRole" value="adminRole">Admin</option>
                                            <option id="superRole" value="superRole">Super Admin</option>
                                          </select>
                                        </div>
                                    </div>

                                    <!--Input Employee ID-->
                                    <div class="col">
                                        <div class="form-group">
                                            <label for="employeeID">Employee ID</label>
                                            <input type="text" class="form-control" id="inputEmployeeID" name="inputEmployeeID" placeholder="Employee ID">
                                        </div>
                                    </div>

                                    <div class="col">
                                    </div>
                                </div>

                                <!--Input First Name-->
                                <div class="row">
                                    <div class="col">
                                        <div class="form-group">
                                            <label for="firstName">First Name</label>
                                            <input type="text" class="form-control" id="inputFirstName" name="inputFirstName" placeholder="First Name">
                                        </div>
                                    </div>

                                    <!--Input Middle Name-->
                                    <div class="col">
                                        <div class="form-group">
                                            <label for="middleName">Middle Name</label>
                                            <input type="text" class="form-control" id="inputMiddleName" name="inputMiddleName" placeholder="Middle Name">
                                        </div>
                                    </div>

                                    <!--Input last Name-->
                                    <div class="col">
                                        <div class="form-group">
                                            <label for="lastName">Last Name</label>
                                            <input type="text" class="form-control" id="inputLastName" name="inputLastName" placeholder="Last Name">
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <!--Input Job Position-->
                                    <div class="col">
                                        <div class="form-group">
                                            <label for="jobPosition">Company Email</label>
                                            <input type="text" class="form-control" id="inputJobPosition" name="inputJobPosition" placeholder="Job Position">
                                        </div>
                                    </div>

                                    <!--Input Company Email-->
                                    <div class="col">
                                        <div class="form-group">
                                            <label for="companyEmail">Company Email</label>
                                            <input type="email" class="form-control" id="inputCompanyEmail" name="inputCompanyEmail" placeholder="Company Email">
                                        </div>
                                    </div>

                                    <!--Input Phone Number-->
                                    <div class="col">
                                        <div class="form-group">
                                            <label for="mobileNumber">Company Email</label>
                                            <input type="text" class="form-control" id="inputMobileNumber" name="inputMobileNumber" placeholder="Mobile Number">
                                        </div>
                                    </div>
                                </div>

                                <button type="submit" class="btn btn-dark float-right btn-sm" id="submitComponent">Submit</button>
                        </div>

                        </form>
                    </div>

                </div>

                <!--Masterlist Table-->
                <div class="accordion" id="masterlistAccordion">
                    <table id="masterlistTable" class="table table-striped table-borderless" style="width:100%; text-align:center; box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.3);">
                        <thead class="table-header">
                            <tr>
                                <th></th>
                                <th>Employee ID</th>
                                <th>First Name</th>
                                <th>Middle Name</th>
                                <th>Last Name</th>
                                <!--
                            {% if request.user.is_superuser %}
                            <th>Actions</th>
                            {% endif %}
                            -->

                            </tr>
                        </thead>
                        <tbody>
                            {% for user in users %}
                            <tr class="table-row" data-user_id="{{user.username}}" data-toggle="collapse" data-target="#userDetails{{user.username}}" aria-expanded="true" aria-controls="userDetails{{user.username}}">
                                <td>
                                    <input type="checkbox">
                                </td>
                                <td>{{user.username}}</td>
                                <td>{{user.first_name}}</td>
                                <td>{{user.profile.middle_name}}</td>
                                <td>{{user.last_name}}</td>
                                <!--
                            {% if request.user.is_superuser %}
                            <td>
                                <form action="{% url 'del_user' %} " method="post ">
                                    {% csrf_token %}
                                    <input type="hidden " name="inputEmployeeID " value="{{user.username}} "></input>
                                    <button type="submit " class="btn btn-link btn-sm deletebtn " id="deleteAdmin " style="text-decoration: none; "><i class="fas fa-user-times fa-sm mr-2 "></i>Delete</button>
                                </form>
                            </td>
                            {% endif %}
                            -->
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                <!--
                <table class="table table-borderless table-striped mt-2 " id="masterlistTable " style="text-align:center; box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.3); ">
                    <thead class="table-header ">
                        <tr>
                            <th scope="col "></th>
                            <th scope="col ">Employee ID</th>
                            <th onclick="sortTable(0) " scope="col ">First Name</th>
                            <th onclick="sortTable(1) " scope="col ">Middle Name</th>
                            <th onclick="sortTable(2) " scope="col ">Last Name</th>
                            {% if request.user.is_superuser %}
                            <th scope="col "></th>
                            {% endif %}
                        </tr>
                    </thead>
                    <tbody>
                        {% for user in users %}
                        <tr class="table-row " data-user_id="{{user.username}} ">
                            <td>
                                <input type="checkbox ">
                            </td>
                            <td>{{user.username}}</td>
                            <td>{{user.first_name}}</td>
                            <td>{{user.profile.middle_name}}</td>
                            <td>{{user.last_name}}</td>
                            {% if request.user.is_superuser %}
                            <td>
                                <form action="{% url 'del_user' %} " method="post ">
                                    {% csrf_token %}
                                    <input type="hidden " name="inputEmployeeID " value="{{user.username}} "></input>
                                    <button type="submit " class="btn btn-link btn-sm deletebtn " id="deleteAdmin " style="text-decoration: none; "><i class="fas fa-user-times fa-sm mr-2 "></i>Delete</button>
                                </form>
                            </td>
                            {% endif %}
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>

                <nav aria-label="Page navigation example " id="masterlistPagination ">
                    <ul class="pagination pagination-sm ">
                        <li class="page-item ">
                            <a class="page-link text-dark " href="# " aria-label="Previous ">
                                <span aria-hidden="true ">&laquo;</span>
                                <span class="sr-only ">Previous</span>
                            </a>
                        </li>
                        <li class="page-item "><a class="page-link text-dark " href="# ">1</a></li>
                        <li class="page-item "><a class="page-link text-dark " href="# ">2</a></li>
                        <li class="page-item "><a class="page-link text-dark " href="# ">3</a></li>
                        <li class="page-item ">
                            <a class="page-link text-dark " href="# " aria-label="Next ">
                                <span aria-hidden="true ">&raquo;</span>
                                <span class="sr-only ">Next</span>
                            </a>
                        </li>
                    </ul>
                </nav>
              -->
            </div>
        </div>
    </div>

    {% for user in users %}
    <div class="right-padding collapse userDetails" id="userDetails{{user.username}}" aria-labelledby="userDetails" data-parent="#masterlistAccordion">
        <div class="container-fluid " id="userDetailsContainer " style="padding:0 25px 25px 12.5px; ">
            <div class="container-fluid " style="background-color: white; padding: 25px; box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.3); border-radius: 0px; ">
                <div style="background-color:#343A40; min-height: 45vh; height: auto; box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.3); text-align:center; position:relative; ">
                    <button type="submit " class="btn btn-link icon mt-2 mr-2 closeAdmin" id="closeAdmin " style="color:white; position:absolute; right: 0; "><i class="fas fa-times fa-sm "></i></button>
                    <button type="submit " class="btn btn-link icon mt-2 ml-2 hidden cancelEditAdmin" id=" " style="color:white; position:absolute; left: 0;"><i class="fas fa-arrow-left fa-sm"></i></button> {% if request.user.is_superuser %}
                    <div class="dropdown">
                        <button type="submit " class="btn btn-link icon mt-2 ml-2 userActions" id=" " style="color:white; position:absolute; left: 0;" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="fas fa-ellipsis-v fa-sm"></i></button>
                        <div class="dropdown-menu" style="min-width: 5px;" aria-labelledby="userActions">
                            <button class="dropdown-item editAdmin" type="button"><i class="fas fa-user-edit fa-sm mr-2 "></i>Edit</button>
                            <form action="{% url 'del_user' %} " method="post ">
                                {% csrf_token %}
                                <input type="hidden" class="" name="inputEmployeeID" value="{{user.username}} "></input>
                                <button class="dropdown-item" type="submit"><i class="fas fa-user-times fa-sm mr-2 "></i>Delete</button>
                            </form>
                        </div>
                        {% endif %}
                    </div>
                    <form class="mb-3" action=" " method="post ">
                        {% csrf_token %}

                        <div class="userHeader mb-2" style="padding-top: 6vh;">
                            <div class="mb-3">
                                <img src="{{ user.profile.user_image.url }}" style="border-radius: 50%; height:20vh; border: 8px solid white;box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.3) ">
                            </div>

                            <div id="adminDetails " class="" style="color: white; ">
                                <h3><b>{{user.first_name}} {{user.profile.middle_name}} {{user.last_name}}</b></h3>
                                <div class="mt-2 ">
                                    <h6><i class="fas fa-user fa-sm mr-2 "></i>{% if user.is_superuser%} Super- Admin {% else %} Admin {% endif %}</h6>
                                    <h6><i class="fas fa-envelope fa-sm mr-2 "></i>{{user.email}}</h6>
                                </div>
                            </div>
                        </div>


                        <!-- Form for Updating user -->
                        <div id="adminForm " class="mr-4 ml-4 mb-4 adminForm hidden" style="color: white; text-align: left; padding-top: 8vh;">
                            <div class="form-group ">
                                <label for="employeeID ">Employee ID</label>
                                <input type="text" class="form-control " id="employeeID " value="{{user.username}}" placeholder=" ">
                            </div>
                            <div class="form-group ">
                                <label for="accessRole ">Access Role</label>
                                <select class="form-control " name="accessRole">
                                    {% if user.is_superuser %}
                                    <option></option>
                                    <option id=" adminRole " value="adminRole">Admin</option>
                                    <option id="superRole " value="superRole" selected>Super Admin</option>
                                    {% else %}
                                    <option></option>
                                    <option id="adminRole" value="adminRole" selected>Admin</option>
                                    <option id="superRole" value="superRole">Super Admin</option>
                                    {% endif %}
                                </select>
                            </div>
                            <div class="form-group ">
                                <label for="employeeID ">First Name</label>
                                <input type="text " class="form-control " id="firstName " value="{{user.first_name}} " placeholder=" ">
                            </div>
                            <div class="form-group ">
                                <label for="employeeID ">Middle Name</label>
                                <input type="text " class="form-control " id="middleName " value="{{user.profile.middle_name}} " placeholder=" ">
                            </div>
                            <div class="form-group ">
                                <label for="employeeID ">Last Name</label>
                                <input type="text " class="form-control " id="lastName " value="{{user.last_name}} " placeholder=" ">
                            </div>
                            <div class="form-group ">
                                <label for="employeeID ">Company Email</label>
                                <input type="text " class="form-control " id="companyEmail " value="{{user.email}} " placeholder=" ">
                            </div>
                            <div class="form-group ">
                                <label for="employeeID ">Job Position</label>
                                <input type="text " class="form-control " id="jobPosition " value="{{user.profile.job_title}} " placeholder=" ">
                            </div>
                            <div class="form-group ">
                                <label for="employeeID ">Mobile Number</label>
                                <input type="text " class="form-control " id="mobileNumber " value="{{user.profile.phone_number}} " placeholder=" ">
                            </div>
                            <button type="submit " class="btn btn-success btn-sm mr-3 saveAdmin hidden" id="saveAdmin " style="position:absolute; right: 0; "><i
                            class="fas fa-save fa-sm mr-2 "></i>Save</button>
                            <br><br>
                        </div>
                    </form>
                </div>
                <div class=" mt-3 " style="background-color:#EAEDED; padding: 20px; min-height: 30vh; height: auto;box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.3) ">
                    <h6><b>Recent Activities:</b></h6>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
</body>

{% endblock body %}